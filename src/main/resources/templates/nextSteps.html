<div th:fragment="nextSteps"
     th:with="contactEmail=${data.getPageInputFirstValue('contactInfo', 'email')},
              enhanced-next-steps=1">
  <div class="grid__item spacing-below-15">
    <div th:replace="fragments/icons/icon-next-steps :: icon-next-steps"></div>
  </div>
  <div class="grid__item">
    <h1 class="h2 spacing-below-35 spacing-above-0" th:text="#{next-steps.title}"></h1>
  </div>
  
  <div class="grid__item width-one-whole spacing-below-25 text--small">
    <!-- original nextSteps content -->
    <div class="next-steps"
         th:if="${not @environment.getProperty('feature-flag.enhanced-next-steps') and nextStepSections.size() > 0}">
 
      <th:block th:each="msg: ${nextStepSections}">
        <div class="grid-ignore-mobile notice--shiba spacing-below-35">
          <div class="success-icons grid__item width-one-sixth">
            <div th:replace="__${msg.icon()}__"
                 class="success-icons text--centered width-one-whole"></div>
          </div>
          <p class="grid__item width-five-sixths next-step-section"
             th:utext="${msg.message()}"></p>
        </div>
      </th:block>
    </div>
    
    <!-- new nextSteps content -->
    <div class="grid__item">
        <p class="spacing-below-35 spacing-above-0" th:text="#{next-steps.open-each-step}"></p>
    </div>
    <div th:if="${@environment.getProperty('feature-flag.enhanced-next-steps')}">
		<div class="accordion" id="next-steps-accordion">
			<button href="#" class="accordion__button" aria-expanded="true" aria-controls="a1">
				<span th:text="#{next-steps.step-1}"></span>
			</button>
			<div class="accordion__content" id="a1">
				<p class="text-25 spacing-below-15">
					<span th:text="#{next-steps.step-1-content-a}"></span>
				</p>
				<p class="text-25 spacing-below-15">
					<span th:text="#{next-steps.step-1-content-b}"></span>
				</p>
			</div>
		</div>
	
		<div class="accordion">
			<button href="#" class="accordion__button" aria-expanded="false" aria-controls="a2">
				<span th:text="#{next-steps.step-2}"></span>
			</button>
			<div class="accordion__content" id="a2">
				<p class="text-25 spacing-below-15">
					<span th:text="#{next-steps.step-2-content-a}"></span>
				</p>
				<p class="text-25 spacing-below-15">
					<span th:text="#{next-steps.step-2-content-b}"></span>
				</p>
			</div>
		</div>
	
		<div class="accordion">
			<button href="#" class="accordion__button" aria-expanded="false" aria-controls="a3">
				<span th:text="#{next-steps.step-3}"></span>
			</button>
			<div class="accordion__content" id="a3">
				<p class="text-25 spacing-below-15">
					<span th:text="#{next-steps.step-3-content-a}"></span>
				</p>
				<p class="text-25 spacing-below-15">
					<span th:text="#{next-steps.step-3-content-b}"></span>
				</p>
			</div>
		</div>
	
		<div class="accordion spacing-below-60">
			<button href="#" class="accordion__button" aria-expanded="false" aria-controls="a4">
				<span th:text="#{next-steps.step-4}"></span>
			</button>
			<div class="accordion__content" id="a4">
				<p class="text-25 spacing-below-15">
					<span th:text="#{next-steps.step-4-content-a}"></span>
				</p>
				<p class="text-25 spacing-below-15">
					<span th:text="#{next-steps.step-4-content-b}"></span>
				</p>
			</div>
		</div>
    </div>
    
  </div>
  
  <div th:replace="fragments/continue :: continue"></div>
  <p class="text--green" th:if="${contactEmail != null && !contactEmail.isEmpty()}">
    <i class="icon-check_circle"></i>
    <span
        th:text="#{next-steps.your-next-steps-have-been-emailed-to(${contactEmail})}"></span>
  </p>
</div>
